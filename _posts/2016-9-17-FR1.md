---
layout: post
title: Fight Rhythm制作流程(1)
keywords: Sign,Sign的博客,技术文章,web开发,cocos creator,横版游戏,web game
description: 开始对ElfA进行重构，代码玩法各个方面都要进行优化。
tags: [animation, web]
---
对ElfA进行进阶制作。

**这不是教程**

--------

## Day 1

重构的第一步，先要确定人物的y轴是否需要位置修正。

人物倒地以及人物起跳都有一定的y轴上的偏移，如果直接制作raw图时就把位置对好其实没什么问题，但是高度就限制了。但是如果用位置修正，则会让代码部分出现不必要的混乱。

综合看来，还是在raw图的时候把位置对准，但是在偏移的时候，有一帧处于位置修正状态，这样高度就不会受到限制。

确定角色原图的表现形式后，就要先开始优化原先的图。

……

没什么干劲，在寻找主角中。只有雅典娜一个罩不住场……

打算启用这小子，一脸“我是主角”的样子。

![主角](/img/2016-9-17-FR1/e1.gif)

本来以我的性格，阿biang哥那种才是正统的主角，不过考虑到世俗的眼光，加上这小子的动作貌似就是横版过关游戏改的，所以就用他了。

其实有好几个横版角色，不过太丑了，所以不取用。（阿biang哥很帅吗？）

## Day 2

day1基本啥都没做，一鼓作气，再而衰……

## Day 3

耽搁了好几天，今天忽然决定改成格斗游戏……

游戏方式想好了，一种全新的节奏格斗类游戏！

日，查了下拳皇已经有节奏格斗的先河的……

不过装不了，还没试过，评价还很差。

看了下视频，啊哈哈哈

幸好和我要做的不一样

名字就叫Fight Rhythm，中文名还是没确定，直译的话就是格斗节奏。

然后依然在切图阶段，真麻烦。

拼图太麻烦，而且以后可能随时要改，所以决定还是把每个招式单独制作sprite图。

## Day 4

拖了2周的新主角截图终于定稿了

把图片一股脑导入编辑器的瞬间，总觉得忽然一阵轻松……

这次学乖了，角色用node节点包裹，然后分解图，影子，受击框，打击框之类的放里面。

![角色节点](/img/2016-9-17-FR1/e2.png)

## Day 5

提取公共点,制作实体类，意义不明……

## Day 6

制作走A效果

需要一个攻击范围碰撞检测框。

## Day 7

先确定需要的碰撞框：攻击范围，攻击框，受击框。

碰撞框配对，攻击范围AR,攻击框AT与受击框BD配对，其他情况不碰撞。

![碰撞框配对](/img/2016-9-17-FR1/e3.png)

弄完这个后发现，其实用tag来判断碰撞结果就行了，tag 0 = ar, tag 1 = at, tag 2 = bd…… 之类的

所以，碰撞框只需要player和enemy两个就行了。

其实主要是因为没法在代码里进行编组，所以需要两个碰撞框的预制资源。

然后我发现了又一个坑，原来cocos creator里的引用和代码里的引用是两回事……

所以特意分离一个实体类感觉没啥意义…………

进展好慢……