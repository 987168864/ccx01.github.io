<!DOCTYPE html>
<html>

<head>
	<meta charset='utf-8'>
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="keywords" content="Sign on the code, ccx01, Sign, code, 开发日志, 沙因Sign">
	<meta name="description" content="Sign on the code : 记录开发过程中的一些 点">

	<link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

	<title>Sign on the code</title>
</head>

<body>

	<!-- HEADER -->
	<div id="header_wrap" class="outer">
		<header class="inner">
			<a id="forkme_banner" href="https://github.com/ccx01">View on GitHub</a>

			<h1 id="project_title">Sign on the code</h1>
			<h2 id="project_tagline">记录开发过程中的一些 点</h2>

		</header>
	</div>

	<!-- MAIN CONTENT -->
	<div id="main_content_wrap" class="outer">
		<section id="main_content" class="inner">
			<p>
				commit还是和以往一样，吐槽加提交内容。
				博客部分相对commit来说要稍微枯燥一点。
			</p>
			<ul>
				<li>
					<h3><a href="https://github.com/ccx01/lv9">lv9</a></h3>
				</li>
				<li>
					<dt>20141018</dt>
					<dd>刚发现原来 <pre>Array+""</pre> 可以替代 <pre>Array.join("")</pre></dd>
					<dd>搞了半天，位置的重点不在轨迹球上，而是在转动轴上- -<br>
						<a href="http://www.w3.org/Talks/2012/0416-CSS-WWW2012/Demos/transforms/demo-rotate3d.html">http://www.w3.org/Talks/2012/0416-CSS-WWW2012/Demos/transforms/demo-rotate3d.html</a>
					</dd>
				</li>
				<li>
					<dt>20141019</dt>
					<dd>算是了解traqball的计算过程了。</dd>
					<dd><a href="http://www.eleqtriq.com/2010/11/natural-object-rotation-with-css3-3d/">http://www.eleqtriq.com/2010/11/natural-object-rotation-with-css3-3d/</a></dd>
					<dd>设置轨迹球圆心及半径<br>
						鼠标滑动时先将平面坐标投到轨迹球上
						<pre>
function calcZvector(coords) {
	var x = coords[0],
		y = coords[1],
		// 将x，y坐标换成以圆心为起点的向量
		vector = [(x / radius - 1), (y / radius - 1)],
		z = 1 - vector[0] * vector[0] - vector[1] * vector[1];

	vector[2] = z > 0 ? Math.sqrt(z) : 0;

	return vector;
}
						</pre>
						旋转时根据鼠标两次向量，得出法向量为旋转的轴<br>
						由法向量算法得到方程式
						<pre>
axis[0] * v1[0] + axis[1] * v1[1] + axis[2] * v1[2] = 0
axis[0] * v2[0] + axis[1] * v2[1] + axis[2] * v2[2] = 0
						</pre>
						设axis[0] = 1可得到对应的axis，转换后如下
						<pre>
axis[0] = v1[1] * v2[2] - v1[2] * v2[1];
axis[1] = v1[2] * v2[0] - v1[0] * v2[2];
axis[2] = v1[0] * v2[1] - v1[1] * v2[0];
						</pre>
						旋转角度则是向量间的夹角
						<pre>
cosθ = v1 * v2 / |v1| * |v2|
						</pre>
						最后将旋转轴和旋转角度套入矩阵公式
						<pre>
var	matrix = [
	[(cos + x * x * cosmin), (y * x * cosmin + z * sin), (z * x * cosmin - y * sin), 0],
	[(x * y * cosmin - z * sin), (cos + y * y * cosmin), (z * y * cosmin + x * sin), 0],
	[(x * z * cosmin + y * sin), (y * z * cosmin - x * sin), (cos + z * z * cosmin), 0],
	[tx, ty, tz, 1]
];
						</pre>
						矩阵公式没有验算过，不过和之前多个矩阵相乘，最后转化出来的结果应该是相同的<br>
						大概rotateX(axis:[1,0,0]),rotateY(axis:[0,1,0]),rotateZ(axis:[0,0,1])需要先转换成对应的axis,angle<br>
						原理应该是这样，但是具体怎么推导还是没什么头绪，总之公式就是这样，先记录一下。
					</dd>
				</li>
			</ul>
		</section>
	</div>

	<!-- FOOTER  -->
	<div id="footer_wrap" class="outer">
		<footer class="inner">
			<p>
				Published with
				<a href="http://pages.github.com">GitHub Pages</a>
			</p>
		</footer>
	</div>

	<script type="text/javascript">
			var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
			document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  </script>
	<script type="text/javascript">
			try {
			  var pageTracker = _gat._getTracker("UA-21979313-1");
			pageTracker._trackPageview();
			} catch(err) {}
		  </script>

</body>
</html>